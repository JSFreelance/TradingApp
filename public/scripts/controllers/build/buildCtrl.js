angular.module("TradeApp").controller("CreateCtrl",["ApiService","$scope","$uibModalInstance","modalScope",function(e,t,n,a){e.getAllCurrencies().then(function(e){t.currencies=Object.keys(e.rates)}),t.newData={sell_amount:null,buy_amount:null,rate:null,sell_currency:null,buy_currency:null},t.updateRate=function(){null!=t.sellCurrencySelect&&null!=t.buyCurrencySelect&&e.getRateSet(t.sellCurrencySelect).then(function(e){t.newData.rate=e.rates[t.buyCurrencySelect]})},t.$watch("newData['sell_amount']",function(){t.newData.buy_amount=t.newData.sell_amount*t.newData.rate}),t.$watch("sellCurrencySelect",function(){t.newData.sell_currency=t.sellCurrencySelect,t.updateRate()}),t.$watch("buyCurrencySelect",function(){t.newData.buy_currency=t.buyCurrencySelect,t.updateRate()}),t.ok=function(){e.createTrade(t.newData,a.reloadResultSet),n.close()},t.cancel=function(){n.dismiss("cancel")}}]),angular.module("TradeApp").controller("DeleteCtrl",["ApiService","$scope","$uibModalInstance","modalScope",function(e,t,n,a){t.ok=function(){e.deleteTrade(a.currentItem(),a.reloadResultSet),n.close()},t.cancel=function(){n.dismiss("cancel")}}]);var TradeApp=angular.module("TradeApp");TradeApp.controller("HomeCtrl",["config","ApiService","$scope","$uibModal",function(e,t,n,a){n.currentPage=1,n.getPageConfig=function(){t.getTradeSet(n.currentPage).then(function(e){n.totalItems=e.count})},n.getTradeSet=function(){t.getTradeSet(n.currentPage).then(function(e){n.getPageConfig(),n.trades=e.results})},n.getTradeSet(),n.getPageConfig(),n.pageChanged=function(){n.getTradeSet()},n.open=function(e,t){n.currentItem=t;a.open({animation:!1,templateUrl:"views/"+e+".html",controller:e+"Ctrl",resolve:{modalScope:{currentItem:function(){return n.currentItem},reloadResultSet:function(){return n.getTradeSet()}}}})}}]),angular.module("TradeApp").controller("UpdateCtrl",["ApiService","$scope","$uibModalInstance","modalScope",function(e,t,n,a){e.getTrade(a.currentItem()).then(function(e){t.updateData=e,t.$watch("updateData['sell_amount']",function(){t.updateData.buy_amount=t.updateData.rate*t.updateData.sell_amount})}),t.ok=function(){e.updateTrade(a.currentItem(),t.updateData,a.reloadResultSet),n.close()},t.cancel=function(){n.dismiss("cancel")}}]);